#include "mpw7705-pinfunc.h"

/dts-v1/;
/ {
	compatible = "rc-module,mpw7705";

    config {
           u-boot,spl-payload-offset = <0x30000>; 
/*           u-boot,mmc-env-offset = <0x4000>;      
           u-boot,efi-partition-entries-offset = <0x200000>; */
           u-boot,boot-led = "module_led";
    };

	aliases {
		spi0 = &spi0;
	} ; 

	lsif0 {
	    u-boot,dm-pre-reloc;
	    compatible = "simple-bus";
		#address-cells = <1>;
		#size-cells = <1>;

		gpio0: gpio0@0x3C03B000 	{
		    compatible = "rc-module,pl061";
		    #address-cells = <1>;
		    #size-cells = <0>;
		    reg = <0x3C03B000 0x1000>;

			u-boot,dm-pre-reloc;
		};

		gpio1: gpio1@0x3C03C000 	{
		    compatible = "rc-module,pl061";
		    #address-cells = <1>;
		    #size-cells = <0>;
		    reg = <0x3C03C000 0x1000>;

			u-boot,dm-pre-reloc;

			pinctrl0 {
					compatible = "rc-module,pl061-pinctrl";
					u-boot,dm-pre-reloc;
					
					pinctrl_spi0_ss_default: spi0_ss_default {
						u-boot,dm-pre-reloc;
						pinmux = <PINMUX_SW_PIN(2, SOFT, OUTPUT, HIGH)>;
					};					
			};
		};

		mgpio0: mgpio0@0x3C040000 {
		    compatible = "rc-module,pl061";
		    #address-cells = <1>;
		    #size-cells = <0>;
		    reg = <0x3C040000 0x1000>;
			u-boot,dm-pre-reloc;
		
			pinctrl1 {
					compatible = "rc-module,pl061-pinctrl";
					u-boot,dm-pre-reloc;
					
					pinctrl_spi0_default: spi0_default {
						u-boot,dm-pre-reloc;
						pinmux = 	<SPI0_SCLK>,
									<SPI0_MOSI>,
									<SPI0_MISO>;
					};					
			};
		};

	    spi0: spi0@0x3C03E000 {
		    compatible = "rc-module,pl022-spi";
			pinctrl-names = "default";
			pinctrl-0 = <&pinctrl_spi0_default>, <&pinctrl_spi0_ss_default>;
			
		    #address-cells = <1>;
		    #size-cells = <0>;
		    reg = <0x3C03E000 0x1000>;
		    num-cs = <1>;
		    spi-max-frequency = <12500000>;
		    u-boot,dm-pre-reloc;

		    flash: m25p32@0 {
			    compatible = "spi-flash_";
			    reg = <0>;
			    u-boot,dm-pre-reloc;
		    };
	    };

	};

	lsif1 {
	    u-boot,dm-pre-reloc;
	    compatible = "simple-bus";
		#address-cells = <1>;
		#size-cells = <1>;


	};
/*
	gpio-leds {
			compatible = "gpio-leds";
	    	u-boot,dm-pre-reloc;

			test0 {
				label = "Test LED 0";
				gpios = <&gpio0 0 1>;
			    u-boot,dm-pre-reloc;
			};
			test1 {
				label = "Test LED 1";
				gpios = <&gpio0 1 0>;
			    u-boot,dm-pre-reloc;
			};
			test2 {
				label = "Test LED 2";
				gpios = <&gpio0 2 1>;
			    u-boot,dm-pre-reloc;
			};
	};
*/	

};
