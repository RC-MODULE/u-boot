#include "mpw7705-pinfunc.h"

/dts-v1/;
/ {
	compatible = "rc-module,mpw7705";

    config {
           u-boot,spl-payload-offset = <0x30000>; 
/*           u-boot,mmc-env-offset = <0x4000>;      
           u-boot,efi-partition-entries-offset = <0x200000>; */
           u-boot,boot-led = "module_led";
    };

	chosen {
		stdout-path = &uart0;
	};

	aliases {
		spi0 = &spi0;
	} ; 

	lsif0 {
	    u-boot,dm-pre-reloc;
	    compatible = "simple-bus";
		#address-cells = <1>;
		#size-cells = <1>;

		gpio0: gpio0@0x3C03B000 	{
		    compatible = "rc-module,pl061";
		    #address-cells = <1>;
		    #size-cells = <0>;
		    reg = <0x3C03B000 0x1000>;

			u-boot,dm-pre-reloc;
		};

		gpio1: gpio1@0x3C03C000 	{
		    compatible = "rc-module,pl061";
		    #address-cells = <1>;
		    #size-cells = <0>;
		    reg = <0x3C03C000 0x1000>;
			#gpio-cells = <2>;
			gpio-controller;

			u-boot,dm-pre-reloc;
		};

		mgpio0: mgpio0@0x3C040000 {
		    compatible = "rc-module,pl061";
		    #address-cells = <1>;
		    #size-cells = <0>;
		    reg = <0x3C040000 0x1000>;
			u-boot,dm-pre-reloc;
		
			pinctrl {
					compatible = "rc-module,pl061-pinctrl";
					u-boot,dm-pre-reloc;
					
					pinctrl_spi0_default: spi0_default {
						u-boot,dm-pre-reloc;
						pinmux = 	<SPI0_SCLK>,
									<SPI0_MOSI>,
									<SPI0_MISO>;
					};					

					pinctrl_uart0_default: uart0_default {
						u-boot,dm-pre-reloc;
						pinmux = 	<UART0_RXD>,
									<UART0_TXD>;
					};					
					pinctrl_uart1_default: uart1_default {
						pinmux = 	<UART1_RXD>,
									<UART1_TXD>;
					};					


			};
		};

	    spi0: spi0@0x3C03E000 {
		    compatible = "rc-module,pl022-spi";
			pinctrl-names = "default";
			pinctrl-0 = <&pinctrl_spi0_default>;
			
		    #address-cells = <1>;
		    #size-cells = <0>;
		    reg = <0x3C03E000 0x1000>;
		    cs-gpios = <&gpio1 2 1>;
		    spi-max-frequency = <12500000>;			
		    u-boot,dm-pre-reloc;

		    spi_flash@0 {
			    compatible = "st,m25w32", "spi-flash";
			    reg = <0>;
			    u-boot,dm-pre-reloc;
		    };
	    };

		uart0: uart0@3C034000 {  /* console */
                compatible = "arm,pl011", "arm,primecell";
                reg = <0x3C034000 0x1000>;
                clock = <100000000>;
				pinctrl-names = "default";
				pinctrl-0 = <&pinctrl_uart0_default>;

 			    u-boot,dm-pre-reloc;
		};		

		uart1: uart1@3C035000 { 
                compatible = "arm,pl011", "arm,primecell";
                reg = <0x3C035000 0x1000>;
                clock = <100000000>;
				pinctrl-names = "default";
				pinctrl-0 = <&pinctrl_uart1_default>;
		};		

	};

	lsif1 {
	    u-boot,dm-pre-reloc;
	    compatible = "simple-bus";
		#address-cells = <1>;
		#size-cells = <1>;

	};
};
